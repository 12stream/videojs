<template>
  <div class="main">
    <div class="return-title">
        <span>中国网正在上演</span>
    </div>
    <div class="search">
      <span class="logo"></span>
      <span class="searchinput" @click="$router.push({path:'/search'})">请输入要搜索的内容
        <img src="./images/search.png">
      </span>
    </div>
    <div class="banner">
      <swiper :options="swiperOption"  ref="mySwiper">  
          <swiper-slide v-for="(item,i) in items" :key="i"> 
              <img :src="item" class="index_img">
          </swiper-slide>  
          <!-- 这是轮播的小圆点 -->  
          <div class="swiper-pagination" slot="pagination"></div>  
      </swiper>  
    </div>
    <div class="hot-new-wrapper">
      <!-- 热门，最新tab标题 -->
      <div class="hotnew">
        <div class="hot-new" v-for="(item,i) in tabContents" :key="i">
          <div :class="currentTabsIndex == i ? 'tabs-item active' : 'tabs-item'" @click="selectTabs(i)">
            {{item}}
          </div>
        </div>
      </div>
      <!-- 热门内容 -->
      <Hot :play="plays" v-show="currentTabsIndex == 0"></Hot>
      <!-- 最新内容 -->
      <New v-show="currentTabsIndex == 1"></New>
    </div>
  </div>
</template>

<script>
import { swiper, swiperSlide } from 'vue-awesome-swiper'
import Hot from './home/Hot'
import New from './home/New'
export default {
  name: 'index',
  data () {
    return {
      items:['http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg','http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg','http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg'],
        swiperOption: {  
            pagination: '.swiper-pagination',  
            slidesPerView: 'auto',  
            centeredSlides: true,  
            paginationClickable: true,
            onSlideChangeEnd: swiper => {  
                //这个位置放swiper的回调方法  
                this.page = swiper.realIndex+1;  
                this.index = swiper.realIndex;  
            },
            autoplay: 1000,
            speed:500,
            loop:true
        }, 
        // swiperSlides: [1, 2, 3, 4, 5],
        tabContents:['热门','最新'],
        currentTabsIndex:0,
        plays:[
          {
            liveType:1
          },
          {
            liveType:2
          },
          {
            liveType:3
          },
          {
            liveType:4
          }
        ],
        playsTitle:'',
        carsouelList:[]
    }
  },
  components:{Hot, New},
  methods:{
    selectTabs(index){
      this.currentTabsIndex = index;
    },
    getShuffling(){
      var url = 'http://result.eolinker.com/XmADiRd84ecff86382eebd937abf48da6a7c58ce377491d?uri=http://192.169.2.63:6022/service/queryIndexImage.action'
    // this.$http({
    //     method: 'post',
    //     url: 'http://result.eolinker.com/XmADiRd84ecff86382eebd937abf48da6a7c58ce377491d?uri=http://192.169.2.63:6022/service/queryIndexImage.action',
    //     data: {}
    //  }).then(res => {
    //    console.log(res)
    //    const data = res.data.paramo;
    //     this.carsouelList = res.data.paramo
    //  })
    this.$axios.post(url).then(response => {
        console.log(response)
      })
    },
    getLiveData(){
      var liveResult = this.plays;
      for(let val of liveResult) {
        if(val.liveType == 1) {
          val.playsTitle = '直播'
        }else if(val.liveType == 2) {
          val.playsTitle = '预告'
        }else if(val.liveType == 3) {
          val.playsTitle = '回放'
        }else if(val.liveType == 4) {
          val.playsTitle = '结束'
        }
      }
      console.log(this.plays)
    }
  },
  computed:{
    swiper() {  
      return this.$refs.mySwiper.swiper;  
    }  
  },
  mounted(){
    this.getShuffling()
    this.getLiveData()
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style lang="scss">
  /* pages/hall/hall.wxss */
.main {
  padding-bottom: 4.9rem;
  .return-title {
    display: flex;
    justify-content: center;
    height: 44px;
    background: #EDEEF1;
    span {
        font-size: 17px;
        color: #111;
        line-height: 44px;
    }
  }
}
.search {
  width: 100%;
  background: #EDEEF1;
  padding: 1rem 0;
  display: flex;
  justify-content: center;
  align-items: center;
  .logo {
    width: 8.5rem;
    height: 1.9rem;
    background: url('./images/logo.png') no-repeat;
    background-size: 8.5rem 1.9rem;
    margin-left: 1.5rem;
  }
  .searchinput {
    height: 3.2rem;
    background: #fff;
    border-radius: 1.7rem;
    flex: 8;
    font-size: 1.3rem;
    margin: 0 1.5rem;
    padding-left: 1.5rem;
    line-height: 3.2rem;
    color: #9B9B9B;
    position: relative;
    img {
      height: 2rem;
      width: 2rem;
      position: absolute;
      right: 1rem;
      top: 50%;
      margin-top: -1rem;
    }
  }
}
.banner {
  width: 100%;
  height: 12rem;
  img {
    width: 100%;
    height: 12rem;
    overflow: hidden;
  }
}
.hotnew {
  display: flex;
  justify-content: center;
  align-items:center;
  .hot-new {
    .tabs-item {
      padding: 1.2rem 2.8rem;
      font-size: 1.3rem;
      color:#111;
      display: flex;
      align-items: center;
      &.active {
        font-size: 2.1rem; 
        color: #FF6633;
      }
    }
  }
}
// .tabs-contents {
//   width: 92%;
//   margin: 0 auto;
//   position: relative;
//   .play-wrapper {
//     margin-bottom:1rem;
//     box-shadow: 0 0.3rem 1rem #EDEEF1;
//     .play-img {
//       img {
//         display: inline-block;
//         width: 100%;
//         height: 19.4rem;
//       }
//     }
//     .play-details {
//       .play-title {
//         font-size: 1.6rem;
//         line-height: 2.3rem;
//         color: #333;
//         padding: 0.6rem 1rem;
//         display: flex;
//         justify-content: space-between;
//         .watch {
//           display: inline-block;
//           border-radius:1.6rem;
//           width: 5.5rem;
//           height: 2.5rem;
//           line-height: 2.5rem;
//           text-align: center;
//           color: #fff;
//           font-size: 1.3rem;
//           background: linear-gradient(-125.3deg,rgba(255,139,26,1),rgba(255,102,51,1));
// box-shadow:0px 4px 8px 0px rgba(255,102,52,0.5);
//         }
//       }
//       .play-time {
//         font-size: 1.3rem;
//         line-height: 1.9rem;
//         color: #9B9B9B;
//         padding: 0.6rem 1rem;
//       }
//     }
//   }
//   .play-seenumber {
//     width: 80%;
//     position: absolute;
//     top: 1rem;
//     left: 1rem;
//     height: 1.9rem;
//     display: flex;
//     .play-wordwrapper {
//       display: flex;
//       background: #FF1818;
//       height: 1.9rem;
//       font-size: 1.2rem;
//       border-radius:1rem;
//       width: 5.4rem;
//       text-align: center;
//       color: #fff;
//       position: relative;
//       z-index: 2;
//       justify-content: space-around;
//       align-items: center;
//       .live-word {
//         position: relative;
//         left: 0.3rem;
//       }
//     }
//     img {
//       width: 1.6rem;
//       height: 1.6rem;
//       position: relative;
//       right: 1px;
//     }
//     .see-livenumber {
//       font-size: 1.2rem;
//       height: 1.9rem;
//       line-height: 1.9rem;
//       color: #fff;
//       border-radius: 0 1rem 1rem 0;
//       background: #000;
//       width: 5rem;
//       text-align: center;
//       position: relative;
//       z-index: 1;
//       left: -0.7rem;
//     }
//   }
// }
.pay-money {
  width: 5rem;
  height: 1.9rem;
  border-radius:5rem 0rem 0rem 5rem;
  position: absolute;
  top: 1rem;
  right: 0;
  background: #FF6634;
  color: #fff;
  text-align: center;
  line-height: 1.9rem;
}
</style>
