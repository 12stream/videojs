import Vue from 'vue'
import Router from 'vue-router'

/*大厅*/
import Hall from '@/views/hall/Index'
import Search from '@/views/hall/Search'
import Live from '@/views/hall/Live'

/*视频*/
import Video from '@/views/video/Index'
import VideoDetails from '@/views/video/Details'

/*预约*/
import Appointment from '@/views/appointment/Index'

/*个人中心*/
import Personal from '@/views/personal/Index'
import Feedback from '@/views/personal/Feedback'
import Newphone from '@/views/personal/Newphone'
import Login from '@/views/personal/Login' //登陆

Vue.use(Router)

const router = new Router({
  mode: 'history',
  routes: [
    {
      path: '/',
      name: 'Hall',
      component: Hall,
      meta:{
        navStatus: true
      }
    },
    {
      path: '/search',
      name: 'Search',
      component: Search,
    },
    {
      path: '/live/:liveId',
      name: 'Live',
      component: Live,
    },
    {
        path:'/appointment',
        name:'Appointment',
        component:Appointment,
        meta:{
          navStatus: true
        }
    },
    {
        path:'/personal',
        name:'Personal',
        component:Personal,
        meta:{
          navStatus: true
        }
    },
    {
      path:'/login',
      name:'Login',
      component:Login
   },
    {
      path:'/newphone',
      name:'Newphone',
      component:Newphone,
     },
      {
        path:'/feedback',
        name:'Feedback',
        component:Feedback,
    },
    {
      path:'/video',
      name:'Video',
      component:Video,
      meta:{
        navStatus: true
      }
    },

    {
      path:'/video/details/:videoId',
      name:'VideoDetails',
      component:VideoDetails
    }
  ]
})

router.beforeEach((to, from, next) =>{
  if(to.name === 'Personal' && !localStorage.getItem("userid")) {
    router.push({path:'/login'})
  }
  next()
})

export default router
